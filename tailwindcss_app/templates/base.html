 {% load static %}

<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Le Gourmet — Restaurant</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="stylesheet" href="{% static 'dist/style.css'%}">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <style>
    body { font-family: 'Inter', sans-serif; }
    .title-font { font-family: 'Playfair Display', serif; }
  </style>
</head>

<body class="bg-white text-gray-900">

  <!-- Navigation -->
  <header class="fixed top-0 left-0 w-full bg-white/80 backdrop-blur-md z-50 shadow-lg">
    <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
      <a href="{% url 'home'%}" class="text-2xl font-bold title-font text-amber-700">Le Gourmet</a>
      <nav class="hidden md:flex space-x-8 text-gray-700 font-medium">
        <a href="{% url 'home'%}" class="hover:text-amber-600 transition">Accueil</a>
        <a href="{% url 'menu'%}" class="hover:text-amber-600 transition">Menu</a>
        <a href="{% url 'about'%}" class="hover:text-amber-600 transition">À propos</a>
        <a href="{% url 'contact'%}" class="hover:text-amber-600 transition">Contact</a>
      </nav>
       <nav class="hidden bg-white border-t shadow-md md:hidden">
        <a href="{% url 'home'%}" class="hover:text-amber-600 transition">Accueil</a>
        <a href="{% url 'menu'%}" class="hover:text-amber-600 transition">Menu</a>
        <a href="{% url 'about'%}" class="hover:text-amber-600 transition">À propos</a>
        <a href="{% url 'contact'%}" class="hover:text-amber-600 transition">Contact</a>
      </nav>
      
     <div class="flex items-center space-y-4">
       <a href="{% url 'reservation'%}" class="hidden md:inline-block bg-amber-700 text-white px-4 py-2 rounded-lg hover:bg-amber-800 transition">
        Réserver
      </a>
      <!-- HEADER PANIER -->
<div class="flex items-center pl-3 ml-3 relative">
    
    <!-- Icône du panier -->
    <a href="{% url 'cart' %}" class="relative inline-flex items-center justify-center w-10 h-10 rounded-full border border-gray-300 hover:bg-gray-100 transition">
        <i class="fa fa-shopping-cart text-gray-700 text-xl"></i>

        <!-- Badge dynamique -->
        {% if cart_count > 0 %}
        <span class="absolute -top-2 -right-2 bg-red-600 text-white text-xs font-bold w-5 h-5 flex items-center justify-center rounded-full">
            {{ cart_count }}
        </span>
        {% endif %}
    </a>

    <!-- Titre style widget-header -->
   
    </div>
     </div>
    </div>
  </header>

{% block content %}
{% endblock content %}


<!-- Footer -->
<footer class="bg-gray-900 text-gray-400 py-8 text-center">
  <p>&copy; 2025 Le Gourmet — Tous droits réservés.</p>
</footer>

<!-- Script navigation -->
<script>
  function showSection(sectionId) {
    document.querySelectorAll('.menu-section').forEach(section => {
      section.classList.add('hidden');
    });
    document.getElementById(sectionId).classList.remove('hidden');
  }
</script>
<script src="https://js.stripe.com/v3/"></script>
<script>
    var stripe = Stripe('{{ STRIPE_TEST_PUBLIC_KEY }}');
    var elements = stripe.elements();
    var cardElement = elements.create('card');
    cardElement.mount('#card-element');

    var form = document.getElementById('payment-form');
    form.addEventListener('submit', function(event) {
        event.preventDefault();

        stripe.createToken(cardElement).then(function(result) {
            if (result.error) {
                // Affichez l'erreur sur votre page
                var errorElement = document.getElementById('card-errors');
                errorElement.textContent = result.error.message;
            } else {
                // Ajoutez le token à votre formulaire et soumettez-le
                var hiddenInput = document.createElement('input');
                hiddenInput.setAttribute('type', 'hidden');
                hiddenInput.setAttribute('name', 'stripeToken');
                hiddenInput.setAttribute('value', result.token.id);
                form.appendChild(hiddenInput);

                // Soumettez le formulaire
                form.submit();
            }
        });
    });
</script>
</body>
</html>